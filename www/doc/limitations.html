<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
	"http://www.w3.org/TR/html4/loose.dtd">
<html>
	<head>
		<title>phc -- Limitations</title>
		<link rel="stylesheet" type="text/css" href="../phc.css">
	</head>
	<body>
		<table width="796" align="center" cellspacing="0" cellpadding="2" style="border: #8a7640 solid 1px;">
		<tr>
			<td height="149" style="background: url(../img/header.png);">&nbsp;</td>
		</tr>
		<tr>
			<td style="color: white; background-color: #8a7640;">
				<a class="nav" href="../index.html">Home</a> | 
				<a class="nav" href="../src/index.html">Downloads</a> | 
				<a class="nav" href="../doc/index.html">Documentation</a> |
				<a class="nav" href="../plugins/index.html">Plugins</a> |
				<a class="nav" href="../spinoffs/index.html">Spinoff Projects</a> |
				<a class="nav" href="../contact.html">Mailing List</a>
			</td>
		</tr>
		<tr><td style="padding: 5px;">
			<h1>Limitations</h1>

			<p> This document describes the known limitations of the current
			<span class="phc">phc</span> implementation.  These limitations are
			things that we are aware of but that are not high on our priority list
			of things to deal with at the moment. However, if any of them are
			bothering you, let us <a href="../contact.html">know</a> and we
			might look into it. </p>

			<h2>Nested Function Definitions</h2>

			<p> As described in <a
			href="representingphp.html">Representing PHP</a>, we cannot
			deal with nested function definitions. <span class="phc">phc</span>
			will break on the following PHP code:

<pre>
&lt;?<b>php</b>
   <b>if</b>($x)
   {
      <b>function</b> f()
      {
         <b>echo</b> "First f";
      }
   }
   <b>else</b>
   {
      <b>function</b> f()
      {
         <b>echo</b> "Second f";
      }
   }

   f();
?&gt;
</pre>

			<p> Currently <span class="phc">phc</span> will generate the
			following AST for this: </p>

<pre>
&lt;?<b>php</b>
   <b>function</b> f()
   {
      <b>echo</b> "First f";
   }

   <b>function</b> f()
   {
      <b>echo</b> "Second f";
   }

   <b>if</b>($x)
   {
   }
   <b>else</b>
   {
   }

   f();
?&gt;
</pre>

			<h2> Comments </h2>
			
			<p> <a href="representingphp.html">Representing PHP</a>
			explains how we deal with comments. Most comments in a PHP script
			should get attached to the right token in the tree, and no comments
			should ever be lost. If that is not true, please <a
			href="../contact.html">send</a> us a sample program that demonstrates
			where it breaks. There are a few problems that we are aware of, and
			there are probably others too. </p>
			
			<p> Dealing with comments in a completely satisfactory way is a
			difficult task! The first problem with our method of dealing with
			comments is how we deal with whitespace in multi-line comments.
			Consider the following example. </p>

<pre>
&lt;?<b>php</b>
   <i><u>/*
    * Some comment with
    * multiple lines
    */</u></i>
   foo();
?&gt;
</pre>

			<p> For clarity, the contents of the comment are underlined. In
			particular, notice that the whitespace at the start of the line is
			included in the comment. This means that when the unparser outputs the
			comment, it outputs something like </p>

<pre>
&lt;?<b>php</b>
   <i>/*
    * Some comment with
       * multiple lines
       */</i>
   foo();
?&gt;
</pre>

			<p>It is unclear how to solve this problem nicely. Suggestions are
			welcome :-) </p>

			<p> Second, it is not currently possible to associate a comment with
			the <code>else</code>-clause of an <code>if</code>-statement. Thus, in
			</p>

<pre>
&lt;?<b>php</b>
   <i>// Comment 1</i>
   <b>if</b>($c)
   {
      foo();
   }
   <i>// Comment 2</i>
   <b>else</b>
   {
      bar();
   }
?&gt;
</pre>

			<p> Comment 2 will be associated with the call to <code>bar</code>
			(but Comment 1 will be associated with the <code>if</code>-statement
			itself). A similar problem occurs with comments for
			<code>elseif</code> statements. </p>

			<p> Finally, if a scope ends on a comment, that comment will be associated with the wrong node. For example, in </p>

<pre>
&lt;?<b>php</b>
   <b>if</b>($c)
   {
      <b>echo</b> "Hi";
   }
   <b>else</b>
   {
      <i>// Do nothing</i>
   }

   <b>echo</b> "World";
?&gt;
</pre>

			<p>the comment will be associated with the <code>echo "World"</code>
			statement. A similar problem occurs when a script ends on a comment;
			that comment will not be lost, but will be associated with the last
			node in the script. </p>

			<h2> Numbers </h2>

			<p> PHP accepts invalid octal numbers such as <code>01090</code>; the
			&ldquo;incorrect tail&rdquo; is silently ignored (so, this number
			should evaluate to 8 decimal). The <span class="phc">phc</span>
			lexical analyser will generate an &ldquo;invalid token&rdquo; instead
			which will result in a syntax error. </p>

		</td></tr>
		<tr>
			<td style="border-top: solid #8a7640 1px; font-size: 8pt; background-color: #efdca5;">
				$LastChangedDate: 2007-01-17 15:55:22 +0000 (Wed, 17 Jan 2007) $. Contents &copy; the <a href="../authors.html">authors</a>.
			</td>
		</tr>
		</table>
	</body>
</html>
